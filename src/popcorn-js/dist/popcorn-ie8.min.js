/*
 * popcorn.js version dc6456bc
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */

(function(){if(!document.addEventListener&&!document.removeEventListener&&!document.dispatchEvent){var p={};document.addEventListener=function(h,i){h=h==="DOMContentLoaded"?"readystatechange":h;if(Event[h.toUpperCase()]||h==="readystatechange")document.attachEvent("on"+h,i);else{p[h]||(p[h]={events:[],queue:[],active:false});p[h].active?p[h].queue.push(i):p[h].events.push(i)}};document.removeEventListener=function(h,i){h=h==="DOMContentLoaded"?"readystatechange":h;var j=0,k=p[h];if(Event[h.toUpperCase()]||
h==="readystatechange")document.detachEvent("on"+h,i);else if(k){for(j=k.events.length-1;j>=0;j--)i===k.events[j]&&delete k.events[j];for(j=k.queue.length-1;j>=0;j--)i===k.queue[j]&&delete k.queue[j]}};document.dispatchEvent=function(h){var i,j,k=h.type;if(!k){k=h;if(h=Popcorn.events.getInterface(k)){i=document.createEvent(h);i.initCustomEvent(k,true,true,window,1)}}if(j=p[k]){j.active=true;for(k=0;k<j.events.length;k++)j.events[k]&&j.events[k].call(this,i,this);if(j.queue.length)for(;j.queue.length;)(i=
j.queue.shift())&&j.events.push(i);j.active=false;j.events.forEach(function(r){r||j.events.splice(j.events.indexOf(r),1)});j.queue.forEach(function(r){r||j.queue.splice(j.queue.indexOf(r),1)})}}}if(!Event.prototype.preventDefault)Event.prototype.preventDefault=function(){this.returnValue=false};if(!Event.prototype.stopPropagation)Event.prototype.stopPropagation=function(){this.cancelBubble=true};window.addEventListener=window.addEventListener||function(h,i){h="on"+h;window.attachEvent(h,i)};window.removeEventListener=
window.removeEventListener||function(h,i){h="on"+h;window.detachEvent(h,i)};HTMLScriptElement.prototype.addEventListener=HTMLScriptElement.prototype.addEventListener||function(h,i){h=h==="load"?"onreadystatechange":"on"+h;if(h==="onreadystatechange")i.readyStateCheck=i.readyStateCheck||function(j){self.readyState==="loaded"&&i(j)};this.attachEvent(h,i.readyStateCheck||i)};HTMLScriptElement.prototype.removeEventListener=HTMLScriptElement.prototype.removeEventListener||function(h,i){h=h==="load"?"onreadystatechange":
"on"+h;this.detachEvent(h,i.readyStateCheck||i)};document.createEvent=document.createEvent||function(){return{type:null,target:null,currentTarget:null,cancelable:false,detail:false,bubbles:false,initEvent:function(h){this.type=h},initCustomEvent:function(h,i,j,k){this.type=h;this.detail=k},stopPropagation:function(){},stopImmediatePropagation:function(){}}};Array.prototype.forEach=Array.prototype.forEach||function(h,i){var j=Object.prototype.hasOwnProperty;if(!this||!h)return{};i=i||this;for(var k in this)j.call(this,
k)&&h.call(i,this[k],k,this);return this};if(!Array.prototype.map)Array.prototype.map=function(h,i){var j,k,r;if(this==null)throw new TypeError("this is null or not defined");var v=Object(this),q=v.length>>>0;if({}.toString.call(h)!="[object Function]")throw new TypeError(h+" is not a function");if(i)j=i;k=Array(q);for(r=0;r<q;){var y;if(r in v){y=v[r];y=h.call(j,y,r,v);k[r]=y}r++}return k};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(h){if(this==null)throw new TypeError;var i=Object(this),
j=i.length>>>0;if(j===0)return-1;var k=0;if(arguments.length>0){k=Number(arguments[1]);if(k!=k)k=0;else if(k!=0&&k!=Infinity&&k!=-Infinity)k=(k>0||-1)*Math.floor(Math.abs(k))}if(k>=j)return-1;for(k=k>=0?k:Math.max(j-Math.abs(k),0);k<j;k++)if(k in i&&i[k]===h)return k;return-1};if(typeof String.prototype.trim!=="function")String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};if(!Object.keys)Object.keys=function(){var h=Object.prototype.hasOwnProperty,i=!{toString:null}.propertyIsEnumerable("toString"),
j=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],k=j.length;return function(r){if(typeof r!=="object"&&(typeof r!=="function"||r===null))throw new TypeError("Object.keys called on non-object");var v=[],q;for(q in r)h.call(r,q)&&v.push(q);if(i)for(q=0;q<k;q++)h.call(r,j[q])&&v.push(j[q]);return v}}();if(!Object.defineProperties)Object.defineProperties=function(h,i){function j(q){function y(H,B){return Object.prototype.hasOwnProperty.call(H,
B)}if(typeof q!=="object"||q===null)throw new TypeError("bad desc");var x={};if(y(q,"enumerable"))x.enumerable=!!h.enumerable;if(y(q,"configurable"))x.configurable=!!q.configurable;if(y(q,"value"))x.value=h.value;if(y(q,"writable"))x.writable=!!q.writable;if(y(q,"get")){var E=q.get;if(typeof E!=="function"&&E!=="undefined")throw new TypeError("bad get");x.get=E}if(y(q,"set")){q=q.set;if(typeof q!=="function"&&q!=="undefined")throw new TypeError("bad set");x.set=q}if(("get"in x||"set"in x)&&("value"in
x||"writable"in x))throw new TypeError("identity-confused descriptor");return x}if(typeof h!=="object"||h===null)throw new TypeError("bad obj");i=Object(i);for(var k=Object.keys(i),r=[],v=0;v<k.length;v++)r.push([k[v],j(i[k[v]])]);for(v=0;v<r.length;v++)Object.defineProperty(h,r[v][0],r[v][1]);return h}})();
(function(p,h){function i(a){t.put.call(this,a)}function j(a){this.parent=a;this.byStart=[{start:-1,end:-1}];this.byEnd=[{start:-1,end:-1}];this.animating=[];this.endIndex=this.startIndex=0;this.previousUpdateTime=-1;this.count=1}function k(a,b){return function(){if(c.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(e){c.plugin.errors.push({plugin:b,thrown:e,source:a.toString()});this.emit("pluginerror",c.plugin.errors)}}}if(h.addEventListener){var r=Array.prototype,
v=Object.prototype,q=r.forEach,y=r.slice,x=v.hasOwnProperty,E=v.toString,H=p.Popcorn,B=[],K=false,C={events:{hash:{},apis:{}}},F=function(){return p.requestAnimationFrame||p.webkitRequestAnimationFrame||p.mozRequestAnimationFrame||p.oRequestAnimationFrame||p.msRequestAnimationFrame||function(a){p.setTimeout(a,16)}}(),t={put:function(a){for(var b in a)if(a.hasOwnProperty(b))this[b]=a[b]}},c=function(a,b){return new c.p.init(a,b||null)};c.version="dc6456bc";c.isSupported=true;c.instances=[];c.p=c.prototype=
{init:function(a,b){var e,d=this;if(typeof a==="function")if(h.readyState==="complete")a(h,c);else{B.push(a);if(!K){K=true;var g=function(){h.removeEventListener("DOMContentLoaded",g,false);for(var s=0,z=B.length;s<z;s++)B[s].call(h,c);B=null};h.addEventListener("DOMContentLoaded",g,false)}}else{if(typeof a==="string")try{e=h.querySelector(a)}catch(l){throw Error("Popcorn.js Error: Invalid media element selector: "+a);}this.media=e||a;e=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";
this[e]=this.media;this.options=c.extend({},b)||{};this.id=this.options.id||c.guid(e);if(c.byId(this.id))throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:c.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new j(this)};c.instances.push(this);var n=function(){if(d.media.currentTime<0)d.media.currentTime=0;d.media.removeEventListener("loadedmetadata",n,false);var s,
z,A,o,f;s=d.media.duration;s=s!=s?Number.MAX_VALUE:s+1;c.addTrackEvent(d,{start:s,end:s});if(!d.isDestroyed){d.data.durationChange=function(){var m=d.media.duration,I=m+1,D=d.data.trackEvents.byStart,w=d.data.trackEvents.byEnd;D.pop();w.pop();for(var G=w.length-1;G>0;G--)w[G].end>m&&d.removeTrackEvent(w[G]._id);for(w=0;w<D.length;w++)D[w].end>m&&d.removeTrackEvent(D[w]._id);d.data.trackEvents.byEnd.push({start:I,end:I});d.data.trackEvents.byStart.push({start:I,end:I})};d.media.addEventListener("durationchange",
d.data.durationChange,false)}if(d.options.frameAnimation){d.data.timeUpdate=function(){c.timeUpdate(d,{});c.forEach(c.manifest,function(m,I){if(z=d.data.running[I]){o=z.length;for(var D=0;D<o;D++){A=z[D];(f=A._natives)&&f.frame&&f.frame.call(d,{},A,d.currentTime())}}});d.emit("timeupdate");!d.isDestroyed&&F(d.data.timeUpdate)};!d.isDestroyed&&F(d.data.timeUpdate)}else{d.data.timeUpdate=function(m){c.timeUpdate(d,m)};d.isDestroyed||d.media.addEventListener("timeupdate",d.data.timeUpdate,false)}};d.media.addEventListener("error",
function(){d.error=d.media.error},false);d.media.readyState>=1?n():d.media.addEventListener("loadedmetadata",n,false);return this}}};c.p.init.prototype=c.p;c.byId=function(a){for(var b=c.instances,e=b.length,d=0;d<e;d++)if(b[d].id===a)return b[d];return null};c.forEach=function(a,b,e){if(!a||!b)return{};e=e||this;var d,g;if(q&&a.forEach===q)return a.forEach(b,e);if(E.call(a)==="[object NodeList]"){d=0;for(g=a.length;d<g;d++)b.call(e,a[d],d,a);return a}for(d in a)x.call(a,d)&&b.call(e,a[d],d,a);return a};
c.extend=function(a){var b=y.call(arguments,1);c.forEach(b,function(e){for(var d in e)a[d]=e[d]});return a};c.extend(c,{noConflict:function(a){if(a)p.Popcorn=H;return c},error:function(a){throw Error(a);},guid:function(a){c.guid.counter++;return(a?a:"")+(+new Date+c.guid.counter)},sizeOf:function(a){var b=0,e;for(e in a)b++;return b},isArray:Array.isArray||function(a){return E.call(a)==="[object Array]"},nop:function(){},position:function(a){if(!a.parentNode)return null;a=a.getBoundingClientRect();
var b={},e=h.documentElement,d=h.body,g,l,n;g=e.clientTop||d.clientTop||0;l=e.clientLeft||d.clientLeft||0;n=p.pageYOffset&&e.scrollTop||d.scrollTop;e=p.pageXOffset&&e.scrollLeft||d.scrollLeft;g=Math.ceil(a.top+n-g);l=Math.ceil(a.left+e-l);for(var s in a)b[s]=Math.round(a[s]);return c.extend({},b,{top:g,left:l})},disable:function(a,b){if(!a.data.disabled[b]){a.data.disabled[b]=true;if(b in c.registryByName&&a.data.running[b])for(var e=a.data.running[b].length-1,d;e>=0;e--){d=a.data.running[b][e];d._natives.end.call(a,
null,d);a.emit("trackend",c.extend({},d,{plugin:d.type,type:"trackend"}))}return a}},enable:function(a,b){if(a.data.disabled[b]){a.data.disabled[b]=false;if(b in c.registryByName&&a.data.running[b])for(var e=a.data.running[b].length-1,d;e>=0;e--){d=a.data.running[b][e];d._natives.start.call(a,null,d);a.emit("trackstart",c.extend({},d,{plugin:d.type,type:"trackstart",track:d}))}return a}},destroy:function(a){var b=a.data.events,e=a.data.trackEvents,d,g,l,n;for(g in b){d=b[g];for(l in d)delete d[l];
b[g]=null}for(n in c.registryByName)c.removePlugin(a,n);e.byStart.length=0;e.byEnd.length=0;if(!a.isDestroyed){a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,false);a.isDestroyed=true}c.instances.splice(c.instances.indexOf(a),1)}});c.guid.counter=1;c.extend(c.p,function(){var a={};c.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),
function(b){a[b]=function(e){var d;if(typeof this.media[b]==="function"){if(e!=null&&/play|pause/.test(b))this.media.currentTime=c.util.toSeconds(e);this.media[b]();return this}if(e!=null){d=this.media[b];this.media[b]=e;d!==e&&this.emit("attrchange",{attribute:b,previousValue:d,currentValue:e});return this}return this.media[b]}});return a}());c.forEach("enable disable".split(" "),function(a){c.p[a]=function(b){return c[a](this,b)}});c.extend(c.p,{roundTime:function(){return Math.round(this.media.currentTime)},
exec:function(a,b,e){var d=arguments.length,g="trackadded",l,n;try{n=c.util.toSeconds(a)}catch(s){}if(typeof n==="number")a=n;if(typeof a==="number"&&d===2){e=b;b=a;a=c.guid("cue")}else if(d===1)b=-1;else if(l=this.getTrackEvent(a)){this.data.trackEvents.remove(a);i.end(this,l);c.removeTrackEvent.ref(this,a);g="cuechange";if(typeof a==="string"&&d===2){if(typeof b==="number")e=l._natives.start;if(typeof b==="function"){e=b;b=l.start}}}else if(d>=2){if(typeof b==="string"){try{n=c.util.toSeconds(b)}catch(z){}b=
n}if(typeof b==="number")e=e||c.nop();if(typeof b==="function"){e=b;b=-1}}d={id:a,start:b,end:b+1,_running:false,_natives:{start:e||c.nop,end:c.nop,type:"cue"}};if(l)d=c.extend(l,d);if(g==="cuechange"){d._id=d.id||d._id||c.guid(d._natives.type);this.data.trackEvents.add(d);i.start(this,d);this.timeUpdate(this,null,true);c.addTrackEvent.ref(this,d);this.emit(g,c.extend({},d,{id:a,type:g,previousValue:{time:l.start,fn:l._natives.start},currentValue:{time:b,fn:e||c.nop},track:l}))}else c.addTrackEvent(this,
d);return this},mute:function(a){a=a==null||a===true?"muted":"unmuted";if(a==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(a==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(a);return this},unmute:function(a){return this.mute(a==null?false:!a)},position:function(){return c.position(this.media)},toggle:function(a){return c[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,b){if(c.isArray(a)){c.forEach(a,function(e){for(var d in e)this.defaults(d,
e[d])},this);return this}if(!this.options.defaults)this.options.defaults={};this.options.defaults[a]||(this.options.defaults[a]={});c.extend(this.options.defaults[a],b);return this}});c.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};
c.Events.Natives=c.Events.UIEvents+" "+c.Events.MouseEvents+" "+c.Events.Events;C.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(a,b){for(var e=C.events.apiTypes,d=a.Natives.split(/\s+/g),g=0,l=d.length;g<l;g++)b.hash[d[g]]=true;e.forEach(function(n){b.apis[n]={};for(var s=a[n].split(/\s+/g),z=s.length,A=0;A<z;A++)b.apis[n][s[A]]=true})})(c.Events,C.events);c.events={isNative:function(a){return!!C.events.hash[a]},getInterface:function(a){if(!c.events.isNative(a))return false;var b=
C.events,e=b.apiTypes;b=b.apis;for(var d=0,g=e.length,l,n;d<g;d++){n=e[d];if(b[n][a]){l=n;break}}return l},all:c.Events.Natives.split(/\s+/g),fn:{trigger:function(a,b){var e,d=this.data.events[a];if(d){if(e=c.events.getInterface(a)){e=h.createEvent(e);e.initEvent(a,true,true,p,1);this.media.dispatchEvent(e);return this}for(e=d.slice();e.length;)e.shift().call(this,b)}return this},listen:function(a,b){var e=this,d=true,g=c.events.hooks[a],l,n;if(typeof b!=="function")throw Error("Popcorn.js Error: Listener is not a function");
if(!this.data.events[a]){this.data.events[a]=[];d=false}if(g){g.add&&g.add.call(this,{},b);if(g.bind)a=g.bind;if(g.handler){n=b;b=function(s){g.handler.call(e,s,n)}}d=true;if(!this.data.events[a]){this.data.events[a]=[];d=false}}this.data.events[a].push(b);!d&&c.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(s){if(e.data.events[a])for(l=e.data.events[a].slice();l.length;)l.shift().call(e,s)},false);return this},unlisten:function(a,b){var e,d=this.data.events[a];if(d){if(typeof b===
"string"){for(e=0;e<d.length;e++)d[e].name===b&&d.splice(e--,1);return this}else if(typeof b==="function"){for(;e!==-1;){e=d.indexOf(b);e!==-1&&d.splice(e,1)}return this}this.data.events[a]=null;return this}}},hooks:{canplayall:{bind:"canplaythrough",add:function(a,b){var e=false;if(this.media.readyState){setTimeout(function(){b.call(this,a)}.bind(this),0);e=true}this.data.hooks.canplayall={fired:e}},handler:function(a,b){if(!this.data.hooks.canplayall.fired){b.call(this,a);this.data.hooks.canplayall.fired=
true}}}}};c.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){c.p[a[0]]=c.p[a[1]]=c.events.fn[a[0]]});i.start=function(a,b){if(b.end>a.media.currentTime&&b.start<=a.media.currentTime&&!b._running){b._running=true;a.data.running[b._natives.type].push(b);if(!a.data.disabled[b._natives.type]){b._natives.start.call(a,null,b);a.emit("trackstart",c.extend({},b,{plugin:b._natives.type,type:"trackstart",track:b}))}}};i.end=function(a,b){var e;if((b.end<=a.media.currentTime||b.start>
a.media.currentTime)&&b._running){e=a.data.running[b._natives.type];b._running=false;e.splice(e.indexOf(b),1);if(!a.data.disabled[b._natives.type]){b._natives.end.call(a,null,b);a.emit("trackend",c.extend({},b,{plugin:b._natives.type,type:"trackend",track:b}))}}};j.prototype.where=function(a){return(this.parent.getTrackEvents()||[]).filter(function(b){var e,d;if(!a)return true;for(e in a){d=a[e];if(b[e]&&b[e]===d||b._natives[e]&&b._natives[e]===d)return true}return false})};j.prototype.add=function(a){var b=
this.byStart,e=this.byEnd,d;a&&a._id&&this.parent.data.history.push(a._id);a.start=c.util.toSeconds(a.start,this.parent.options.framerate);a.end=c.util.toSeconds(a.end,this.parent.options.framerate);for(d=b.length-1;d>=0;d--)if(a.start>=b[d].start){b.splice(d+1,0,a);break}for(b=e.length-1;b>=0;b--)if(a.end>e[b].end){e.splice(b+1,0,a);break}d<=this.parent.data.trackEvents.startIndex&&a.start<=this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.startIndex++;b<=this.parent.data.trackEvents.endIndex&&
a.end<this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.endIndex++;this.count++};j.prototype.remove=function(a){if(a instanceof i)a=a.id;if(typeof a==="object"){this.where(a).forEach(function(o){this.removeTrackEvent(o._id)},this.parent);return this}var b,e,d;d=this.byStart.length;for(var g=0,l=0,n=[],s=[],z=[],A=[];--d>-1;){b=this.byStart[g];e=this.byEnd[g];if(!b._id){n.push(b);s.push(e)}if(b._id){b._id!==a&&n.push(b);e._id!==a&&s.push(e);if(b._id===a)l=g}g++}d=this.animating.length;
g=0;if(d)for(;--d>-1;){b=this.animating[g];b._id||z.push(b);b._id&&b._id!==a&&z.push(b);g++}l<=this.startIndex&&this.startIndex--;l<=this.endIndex&&this.endIndex--;this.byStart=n;this.byEnd=s;this.animating=z;this.count--;d=this.parent.data.history.length;for(g=0;g<d;g++)this.parent.data.history[g]!==a&&A.push(this.parent.data.history[g]);this.parent.data.history=A};c.addTrackEvent=function(a,b){var e;if(!(b instanceof i)){if((b=new i(b))&&b._natives&&b._natives.type&&a.options.defaults&&a.options.defaults[b._natives.type]){e=
c.extend({},b);c.extend(b,a.options.defaults[b._natives.type],e)}if(b._natives){b._id=b.id||b._id||c.guid(b._natives.type);if(b._natives._setup){b._natives._setup.call(a,b);a.emit("tracksetup",c.extend({},b,{plugin:b._natives.type,type:"tracksetup",track:b}))}}a.data.trackEvents.add(b);i.start(a,b);this.timeUpdate(a,null,true);b._id&&c.addTrackEvent.ref(a,b);a.emit("trackadded",c.extend({},b,b._natives?{plugin:b._natives.type}:{},{type:"trackadded",track:b}))}};c.addTrackEvent.ref=function(a,b){a.data.trackRefs[b._id]=
b;return a};c.removeTrackEvent=function(a,b){var e=a.getTrackEvent(b);if(e){e._natives._teardown&&e._natives._teardown.call(a,e);a.data.trackEvents.remove(b);c.removeTrackEvent.ref(a,b);e._natives&&a.emit("trackremoved",c.extend({},e,{plugin:e._natives.type,type:"trackremoved",track:e}))}};c.removeTrackEvent.ref=function(a,b){delete a.data.trackRefs[b];return a};c.getTrackEvents=function(a){var b=[];a=a.data.trackEvents.byStart;for(var e=a.length,d=0,g;d<e;d++){g=a[d];g._id&&b.push(g)}return b};c.getTrackEvents.ref=
function(a){return a.data.trackRefs};c.getTrackEvent=function(a,b){return a.data.trackRefs[b]};c.getTrackEvent.ref=function(a,b){return a.data.trackRefs[b]};c.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};c.timeUpdate=function(a,b){var e=a.media.currentTime,d=a.data.trackEvents.previousUpdateTime,g=a.data.trackEvents,l=g.endIndex,n=g.startIndex,s=g.byStart.length,z=g.byEnd.length,A=c.registryByName,o,f,m;if(d<=e){for(;g.byEnd[l]&&g.byEnd[l].end<=e;){o=g.byEnd[l];
f=(d=o._natives)&&d.type;if(!d||A[f]||a[f]){if(o._running===true){o._running=false;m=a.data.running[f];m.splice(m.indexOf(o),1);if(!a.data.disabled[f]){d.end.call(a,b,o);a.emit("trackend",c.extend({},o,{plugin:f,type:"trackend",track:o}))}}l++}else{c.removeTrackEvent(a,o._id);return}}for(;g.byStart[n]&&g.byStart[n].start<=e;){o=g.byStart[n];f=(d=o._natives)&&d.type;if(!d||A[f]||a[f]){if(o.end>e&&o._running===false){o._running=true;a.data.running[f].push(o);if(!a.data.disabled[f]){d.start.call(a,b,
o);a.emit("trackstart",c.extend({},o,{plugin:f,type:"trackstart",track:o}))}}n++}else{c.removeTrackEvent(a,o._id);return}}}else if(d>e){for(;g.byStart[n]&&g.byStart[n].start>e;){o=g.byStart[n];f=(d=o._natives)&&d.type;if(!d||A[f]||a[f]){if(o._running===true){o._running=false;m=a.data.running[f];m.splice(m.indexOf(o),1);if(!a.data.disabled[f]){d.end.call(a,b,o);a.emit("trackend",c.extend({},o,{plugin:f,type:"trackend",track:o}))}}n--}else{c.removeTrackEvent(a,o._id);return}}for(;g.byEnd[l]&&g.byEnd[l].end>
e;){o=g.byEnd[l];f=(d=o._natives)&&d.type;if(!d||A[f]||a[f]){if(o.start<=e&&o._running===false){o._running=true;a.data.running[f].push(o);if(!a.data.disabled[f]){d.start.call(a,b,o);a.emit("trackstart",c.extend({},o,{plugin:f,type:"trackstart",track:o}))}}l--}else{c.removeTrackEvent(a,o._id);return}}}g.endIndex=l;g.startIndex=n;g.previousUpdateTime=e;g.byStart.length<s&&g.startIndex--;g.byEnd.length<z&&g.endIndex--};c.extend(c.p,{getTrackEvents:function(){return c.getTrackEvents.call(null,this)},
getTrackEvent:function(a){return c.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return c.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){c.removeTrackEvent.call(null,this,a);return this},removePlugin:function(a){c.removePlugin.call(null,this,a);return this},timeUpdate:function(a){c.timeUpdate.call(null,this,a);return this},destroy:function(){c.destroy.call(null,this);return this}});c.manifest={};c.registry=[];c.registryByName={};c.plugin=function(a,b,e){if(c.protect.natives.indexOf(a.toLowerCase())>=
0)c.error("'"+a+"' is a protected function name");else{var d=typeof b==="function",g=["start","end","type","manifest"],l=["_setup","_teardown","start","end","frame"],n={},s=function(o,f){o=o||c.nop;f=f||c.nop;return function(){o.apply(this,arguments);f.apply(this,arguments)}};c.manifest[a]=e=e||b.manifest||{};l.forEach(function(o){b[o]=k(b[o]||c.nop,a)});var z=function(o,f){if(!f)return this;if(f.ranges&&c.isArray(f.ranges)){c.forEach(f.ranges,function(w){w=c.extend({},f,w);delete w.ranges;this[a](w)},
this);return this}var m=f._natives={},I="",D;c.extend(m,o);f._natives.type=f._natives.plugin=a;f._running=false;m.start=m.start||m["in"];m.end=m.end||m.out;if(f.once)m.end=s(m.end,function(){this.removeTrackEvent(f._id)});m._teardown=s(function(){var w=y.call(arguments),G=this.data.running[m.type];w.unshift(null);w[1]._running&&G.splice(G.indexOf(f),1)&&m.end.apply(this,w);w[1]._running=false;this.emit("trackend",c.extend({},f,{plugin:m.type,type:"trackend",track:c.getTrackEvent(this,f.id||f._id)}))},
m._teardown);m._teardown=s(m._teardown,function(){this.emit("trackteardown",c.extend({},f,{plugin:a,type:"trackteardown",track:c.getTrackEvent(this,f.id||f._id)}))});f.compose=f.compose||[];if(typeof f.compose==="string")f.compose=f.compose.split(" ");f.effect=f.effect||[];if(typeof f.effect==="string")f.effect=f.effect.split(" ");f.compose=f.compose.concat(f.effect);f.compose.forEach(function(w){I=c.compositions[w]||{};l.forEach(function(G){m[G]=s(m[G],I[G])})});f._natives.manifest=e;if(!("start"in
f))f.start=f["in"]||0;if(!f.end&&f.end!==0)f.end=f.out||Number.MAX_VALUE;if(!x.call(f,"toString"))f.toString=function(){var w=["start: "+f.start,"end: "+f.end,"id: "+(f.id||f._id)];f.target!=null&&w.push("target: "+f.target);return a+" ( "+w.join(", ")+" )"};if(!f.target){D="options"in e&&e.options;f.target=D&&"target"in D&&D.target}if(!f._id&&f._natives)f._id=c.guid(f._natives.type);if(f instanceof i){if(f._natives){f._id=f.id||f._id||c.guid(f._natives.type);if(f._natives._setup){f._natives._setup.call(this,
f);this.emit("tracksetup",c.extend({},f,{plugin:f._natives.type,type:"tracksetup",track:f}))}}this.data.trackEvents.add(f);i.start(this,f);this.timeUpdate(this,null,true);f._id&&c.addTrackEvent.ref(this,f)}else c.addTrackEvent(this,f);c.forEach(o,function(w,G){g.indexOf(G)===-1&&this.on(G,w)},this);return this};c.p[a]=n[a]=function(o,f){var m,I;if(o&&!f)f=o;else if(m=this.getTrackEvent(o)){I=f;var D={},w;for(w in m)if(x.call(I,w)&&x.call(m,w))D[w]=m[w];if(m._natives._update){this.data.trackEvents.remove(m);
if(x.call(f,"start"))m.start=f.start;if(x.call(f,"end"))m.end=f.end;i.end(this,m);d&&b.call(this,m);m._natives._update.call(this,m,f);this.data.trackEvents.add(m);i.start(this,m)}else{c.extend(m,f);this.data.trackEvents.remove(o);m._natives._teardown&&m._natives._teardown.call(this,m);c.removeTrackEvent.ref(this,o);if(d)z.call(this,b.call(this,m),m);else{m._id=m.id||m._id||c.guid(m._natives.type);if(m._natives&&m._natives._setup){m._natives._setup.call(this,m);this.emit("tracksetup",c.extend({},m,
{plugin:m._natives.type,type:"tracksetup",track:m}))}this.data.trackEvents.add(m);i.start(this,m);this.timeUpdate(this,null,true);c.addTrackEvent.ref(this,m)}this.emit("trackchange",{id:m.id,type:"trackchange",previousValue:D,currentValue:m,track:m});return this}m._natives.type!=="cue"&&this.emit("trackchange",{id:m.id,type:"trackchange",previousValue:D,currentValue:I,track:m});return this}else f.id=o;this.data.running[a]=this.data.running[a]||[];m=c.extend({},this.options.defaults&&this.options.defaults[a]||
{},f);z.call(this,d?b.call(this,m):b,m);return this};e&&c.extend(b,{manifest:e});var A={fn:n[a],definition:b,base:b,parents:[],name:a};c.registry.push(c.extend(n,A,{type:a}));c.registryByName[a]=A;return n}};c.plugin.errors=[];c.plugin.debug=c.version==="dc6456bc";c.removePlugin=function(a,b){if(!b){b=a;a=c.p;if(c.protect.natives.indexOf(b.toLowerCase())>=0){c.error("'"+b+"' is a protected function name");return}var e=c.registry.length,d;for(d=0;d<e;d++)if(c.registry[d].name===b){c.registry.splice(d,
1);delete c.registryByName[b];delete c.manifest[b];delete a[b];return}}e=a.data.trackEvents.byStart;d=a.data.trackEvents.byEnd;var g=a.data.trackEvents.animating,l,n;l=0;for(n=e.length;l<n;l++){if(e[l]&&e[l]._natives&&e[l]._natives.type===b){e[l]._natives._teardown&&e[l]._natives._teardown.call(a,e[l]);e.splice(l,1);l--;n--;if(a.data.trackEvents.startIndex<=l){a.data.trackEvents.startIndex--;a.data.trackEvents.endIndex--}}d[l]&&d[l]._natives&&d[l]._natives.type===b&&d.splice(l,1)}l=0;for(n=g.length;l<
n;l++)if(g[l]&&g[l]._natives&&g[l]._natives.type===b){g.splice(l,1);l--;n--}};c.compositions={};c.compose=function(a,b,e){c.manifest[a]=e||b.manifest||{};c.compositions[a]=b};c.plugin.effect=c.effect=c.compose;var L=/^(?:\.|#|\[)/;c.dom={debug:false,find:function(a,b){var e=null;b=b||h;if(a){if(!L.test(a)){e=h.getElementById(a);if(e!==null)return e}try{e=b.querySelector(a)}catch(d){if(c.dom.debug)throw Error(d);}}return e}};var u=/\?/,J={ajax:null,url:"",data:"",dataType:"",success:c.nop,type:"GET",
async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8"};c.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&(a.dataType==="jsonp"||a.dataType==="script"))c.xhr.getJSONP(a.url,a.success,a.dataType==="script");else{a=c.extend({},J,a);a.ajax=new XMLHttpRequest;if(a.ajax){if(a.type==="GET"&&a.data){a.url+=(u.test(a.url)?"&":"?")+a.data;a.data=null}a.ajax.open(a.type,a.url,a.async);a.type==="POST"&&a.ajax.setRequestHeader("Content-Type",a.contentType);
a.ajax.send(a.data||null);return c.xhr.httpData(a)}}};c.xhr.httpData=function(a){var b,e=null,d,g=null;a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{e=JSON.parse(a.ajax.responseText)}catch(l){}b={xml:a.ajax.responseXML,text:a.ajax.responseText,json:e};if(!b.xml||!b.xml.documentElement){b.xml=null;try{d=new DOMParser;g=d.parseFromString(a.ajax.responseText,"text/xml");if(!g.getElementsByTagName("parsererror").length)b.xml=g}catch(n){}}if(a.dataType)b=b[a.dataType];a.success.call(a.ajax,
b)}};return b};c.xhr.getJSONP=function(a,b,e){var d=h.head||h.getElementsByTagName("head")[0]||h.documentElement,g=h.createElement("script"),l=false,n=[];n=/(=)\?(?=&|$)|\?\?/;var s,z;if(!e){z=a.match(/(callback=[^&]*)/);if(z!==null&&z.length){n=z[1].split("=")[1];if(n==="?")n="jsonp";s=c.guid(n);a=a.replace(/(callback=[^&]*)/,"callback="+s)}else{s=c.guid("jsonp");if(n.test(a))a=a.replace(n,"$1"+s);n=a.split(/\?(.+)?/);a=n[0]+"?";if(n[1])a+=n[1]+"&";a+="callback="+s}window[s]=function(A){b&&b(A);
l=true}}g.addEventListener("load",function(){e&&b&&b();l&&delete window[s];d.removeChild(g)},false);g.addEventListener("error",function(A){b&&b({error:A});e||delete window[s];d.removeChild(g)},false);g.src=a;d.insertBefore(g,d.firstChild)};c.getJSONP=c.xhr.getJSONP;c.getScript=c.xhr.getScript=function(a,b){return c.xhr.getJSONP(a,b,true)};c.util={toSeconds:function(a,b){var e=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,d,g,l;if(typeof a==="number")return a;typeof a==="string"&&!e.test(a)&&c.error("Invalid time format");
e=a.split(":");d=e.length-1;g=e[d];if(g.indexOf(";")>-1){g=g.split(";");l=0;if(b&&typeof b==="number")l=parseFloat(g[1],10)/b;e[d]=parseInt(g[0],10)+l}d=e[0];return{1:parseFloat(d,10),2:parseInt(d,10)*60+parseFloat(e[1],10),3:parseInt(d,10)*3600+parseInt(e[1],10)*60+parseFloat(e[2],10)}[e.length||1]}};c.p.cue=c.p.exec;c.protect={natives:function(a){return Object.keys?Object.keys(a):function(b){var e,d=[];for(e in b)x.call(b,e)&&d.push(e);return d}(a)}(c.p).map(function(a){return a.toLowerCase()})};
c.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(a,b){var e=c.p[b];c.p[b]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+b+"', "+(a==null?"do not use.":"use '"+a+"' instead."));c.p[b]=e}return c.p[a].apply(this,[].slice.call(arguments))}});p.Popcorn=c}else{p.Popcorn={isSupported:false};for(r="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);r.length;)p.Popcorn[r.shift()]=
function(){}}})(window,window.document);
(function(p){var h=function(i,j){i=i||p.nop;j=j||p.nop;return function(){i.apply(this,arguments);j.apply(this,arguments)}};p.player=function(i,j){if(!p[i]){j=j||{};var k=function(r,v,q){q=q||{};var y=new Date/1E3,x=y,E=0,H=0,B=1,K=false,C={},F=typeof r==="string"?p.dom.find(r):r,t={};Object.prototype.__defineGetter__||(t=F||document.createElement("div"));for(var c in F)if(!(c in t))if(typeof F[c]==="object")t[c]=F[c];else if(typeof F[c]==="function")t[c]=function(u){return"length"in F[u]&&!F[u].call?
F[u]:function(){return F[u].apply(F,arguments)}}(c);else p.player.defineProperty(t,c,{get:function(u){return function(){return F[u]}}(c),set:p.nop,configurable:true});var L=function(){y=new Date/1E3;if(!t.paused){t.currentTime+=y-x;t.dispatchEvent("timeupdate");setTimeout(L,10)}x=y};t.play=function(){this.paused=false;if(t.readyState>=4){x=new Date/1E3;t.dispatchEvent("play");L()}};t.pause=function(){this.paused=true;t.dispatchEvent("pause")};p.player.defineProperty(t,"currentTime",{get:function(){return E},
set:function(u){E=+u;t.dispatchEvent("timeupdate");return E},configurable:true});p.player.defineProperty(t,"volume",{get:function(){return B},set:function(u){B=+u;t.dispatchEvent("volumechange");return B},configurable:true});p.player.defineProperty(t,"muted",{get:function(){return K},set:function(u){K=+u;t.dispatchEvent("volumechange");return K},configurable:true});p.player.defineProperty(t,"readyState",{get:function(){return H},set:function(u){return H=u},configurable:true});t.addEventListener=function(u,
J){C[u]||(C[u]=[]);C[u].push(J);return J};t.removeEventListener=function(u,J){var a,b=C[u];if(b){for(a=C[u].length-1;a>=0;a--)J===b[a]&&b.splice(a,1);return J}};t.dispatchEvent=function(u){var J,a=u.type;if(!a){a=u;if(u=p.events.getInterface(a)){J=document.createEvent(u);J.initEvent(a,true,true,window,1)}}if(C[a])for(u=C[a].length-1;u>=0;u--)C[a][u].call(this,J,this)};t.src=v||"";t.duration=0;t.paused=true;t.ended=0;q&&q.events&&p.forEach(q.events,function(u,J){t.addEventListener(J,u,false)});if(j._canPlayType(F.nodeName,
v)!==false)if(j._setup)j._setup.call(t,q);else{t.readyState=4;t.dispatchEvent("loadedmetadata");t.dispatchEvent("loadeddata");t.dispatchEvent("canplaythrough")}else setTimeout(function(){t.dispatchEvent("error")},0);r=new p.p.init(t,q);if(j._teardown)r.destroy=h(r.destroy,function(){j._teardown.call(t,q)});return r};k.canPlayType=j._canPlayType=j._canPlayType||p.nop;p[i]=p.player.registry[i]=k}};p.player.registry={};p.player.defineProperty=Object.defineProperty||function(i,j,k){i.__defineGetter__(j,
k.get||p.nop);i.__defineSetter__(j,k.set||p.nop)};p.player.playerQueue=function(){var i=[],j=false;return{next:function(){j=false;i.shift();i[0]&&i[0]()},add:function(k){i.push(function(){j=true;k&&k()});!j&&i[0]()}}};p.smart=function(i,j,k){var r=typeof i==="string"?p.dom.find(i):i,v,q,y,x,E,H="HTMLYouTubeVideoElement HTMLVimeoVideoElement HTMLSoundCloudAudioElement HTMLNullVideoElement".split(" ");if(r){j=typeof j==="string"?[j]:j;i=0;for(E=j.length;i<E;i++){v=j[i];for(q=0;q<H.length;q++)if((x=
p[H[q]])&&x._canPlaySrc(v)==="probably"){y=x(r);k=p(y,k);setTimeout(function(){y.src=v},0);return k}for(var B in p.player.registry)if(p.player.registry.hasOwnProperty(B))if(p.player.registry[B].canPlayType(r.nodeName,v))return p[B](r,v,k)}var K;B=p.guid("popcorn-video-");q=document.createElement("div");q.style.width="100%";q.style.height="100%";if(j.length===1){K=document.createElement("video");K.id=B;r.appendChild(K);setTimeout(function(){var C=document.createElement("div");C.innerHTML=j[0];K.src=
C.firstChild.nodeValue},0);return p("#"+B,k)}r.appendChild(q);H='<video id="'+B+'" preload=auto autobuffer>';i=0;for(E=j.length;i<E;i++)H+='<source src="'+j[i]+'">';H+="</video>";q.innerHTML=H;k&&k.events&&k.events.error&&r.addEventListener("error",k.events.error,false);return p("#"+B,k)}else p.error("Specified target `"+i+"` was not found.")}})(Popcorn);
(function(p,h){var i=function(j,k){return typeof k==="string"&&h.HTMLYouTubeVideoElement._canPlaySrc(k)};h.player("youtube",{_canPlayType:i});h.youtube=function(j,k,r){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'youtube'. Please use Popcorn.HTMLYouTubeVideoElement directly.");var v=h.HTMLYouTubeVideoElement(j);j=h(v,r);setTimeout(function(){v.src=k},0);return j};h.youtube.canPlayType=i})(window,Popcorn);
